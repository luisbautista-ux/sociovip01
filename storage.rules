
rules_version = '2';

// Reglas para el servicio de Firebase Storage
service firebase.storage {
  // Coincide con cualquier bucket en tu proyecto
  match /b/{bucket}/o {

    // Regla global más simple:
    // Permite la lectura a cualquier usuario (para imágenes públicas)
    // Permite la escritura (subir, actualizar, borrar) SOLO a usuarios autenticados.
    // La seguridad de quién sube a qué carpeta se maneja en el código del cliente
    // (que obtiene el businessId del perfil del usuario) y con nombres de archivo únicos
    // para prevenir sobrescrituras no deseadas.
    match /{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
